/* Generated by AN DISI Unibo */ 
/*
This code is generated only ONCE
*/
package it.unibo.guimanager;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import it.unibo.gui.RobotGUI;
import it.unibo.guimanager.businesslogic.BLFactory;
import it.unibo.guimanager.businesslogic.BLFactory.BLType;
import it.unibo.guimanager.interfaces.IGuiManagerBL;
import it.unibo.is.interfaces.IActivity;
import it.unibo.is.interfaces.IIntent;
import it.unibo.is.interfaces.IOutputEnvView;
import it.unibo.model.map.Map;
import it.unibo.qactors.QActorContext;

public class Guimanager extends AbstractGuimanager implements IActivity
{
	
	private IGuiManagerBL controller;
	
	
	public Guimanager(String actorId, QActorContext myCtx, IOutputEnvView outEnvView )
			throws Exception
	{
		super(actorId, myCtx, outEnvView);
	}
	
	// INIT ---------------------------------------------------------
	
	public void initRobotGui(){
		controller = BLFactory.getBusinessLogic(this, BLType.GUI);
	}
	
	public void initUnity(){
		controller = BLFactory.getBusinessLogic(this, BLType.UNITY);
	}	
	
	// BUSINESS LOGIC -----------------------------------------------
	
	public void showMap(int startX, int startY, String filename)
	{
		controller.showMap(startX, startY, filename);
	}
	
	public void createActor(){
		controller.createActor();
	}
	
	public void updateState(int x, int y, String direction)
	{
		controller.updateState(x, y, direction);
	}
	
	// ---------------------------------------------------------------


	
	public void setEnv(IOutputEnvView env)
	{
		this.env = env.getEnv();
	}
	
	@Override
	public void execAction(String cmd) {
		
		String[] command = cmd.split(" ");		
		String[] params;
		switch (command[0]){
		
		case "WORLDCHANGED":
			
			params = command[1].split(",");
			emit( "updateSimulation", "updateSimulation(position("+params[0]+","+params[1]+"))");
			break;
		}
		
	}


	@Override
	public void execAction() {
		// TODO Auto-generated method stub
		
	}


	@Override
	public void execAction(IIntent input) {
		// TODO Auto-generated method stub
		
	}


	@Override
	public String execActionWithAnswer(String cmd) {
		// TODO Auto-generated method stub
		return null;
	}
	
}
